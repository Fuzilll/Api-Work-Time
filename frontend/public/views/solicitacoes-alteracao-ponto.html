<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solicitações de Alteração de Ponto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="css/solicitacoes-alteracao-ponto.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Fallback local para Font Awesome -->
    <script>
        if (!document.querySelector('link[href*="fontawesome"]')) {
            document.write('<link href="/css/fontawesome.all.min.css" rel="stylesheet">');
        }
    </script>
</head>

<body>
    <div class="sidebar closed" id="sidebar">
        <img src="/assets/images/abrir.png" alt="Abrir" class="toggle-btn" id="toggleBtn">
        <div class="logo-container text-center">
            <img src="/assets/images/logo.png" alt="Logo" class="img-fluid">
        </div>
        <div id="menu"></div>
        <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> <span>Sair</span></a>
    </div>

    <div class="mobile-menu">
        <div class="mobile-header">
            <button class="mobile-menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <img src="/assets/images/logo-mobile.png" alt="Logo" class="mobile-logo">
        </div>
        <div class="mobile-menu-items" id="mobileMenu"></div>
    </div>

    <div class="content">
        <div class="topbar">
            <button class="help-btn"><i class="fas fa-question-circle"></i> Ajuda</button>
        </div>
        <div class="container mt-4">

            <h2>Solicitações Pendentes</h2>

            <table id="solicitacoesTable">
                <thead>
                    <tr>
                        <th>Nome do Funcionário</th>
                        <th>Data/Hora Original</th>
                        <th>Tipo</th>
                        <th>Departamento</th>
                        <th>Motivo</th>
                        <th>Status</th>
                        <th>Ação</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Dados serão preenchidos via JavaScript -->
                </tbody>
            </table>
        </div>
        <div id="modalAprovarRejeitar" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3 id="modalTitulo"></h3>
                <p><strong>Funcionário:</strong> <span id="modalFuncionario"></span></p>
                <p><strong>Data/Hora Original:</strong> <span id="modalDataHora"></span></p>
                <p><strong>Motivo da Solicitação:</strong> <span id="modalMotivo"></span></p>

                <label for="motivoAdmin">Informe o motivo da sua decisão:</label>
                <textarea id="motivoAdmin" placeholder="Descreva o motivo para aprovar ou rejeitar esta solicitação..."
                    required></textarea>

                <div style="text-align: right; margin-top: 15px;">
                    <button id="btnConfirmarAcao" class="btn"></button>
                    <button id="btnCancelarAcao" class="btn" style="background-color: #6c757d;">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="loading-overlay">
        <div class="spinner-border text-light" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto" id="toast-title">Notificação</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toast-message"></div>
        </div>
    </div>
    <div id="toast" class="toast position-fixed bottom-0 end-0 m-3" role="alert" aria-live="assertive"
        aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body"></div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                aria-label="Fechar"></button>
        </div>
    </div>
    <div id="error-message" class="alert alert-danger"
        style="display: none; position: fixed; top: 20px; right: 20px; z-index: 1100;"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/menu.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    <script src="/js/sidebarToggle.js"></script>
    <script src="/js/alterar_modo.js"></script>
    <script src="/js/solicitacoes_alteracao.js"></script>


</body>

</html>